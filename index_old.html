<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stickman Fighter - ƒê·ªëi Kh√°ng Ng∆∞·ªùi Que</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            max-width: 900px;
            width: 95%;
        }

        .game-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            text-align: center;
            color: white;
        }

        .game-header h1 {
            font-size: 28px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .health-bars {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 15px;
        }

        .player-health {
            flex: 1;
        }

        .player-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
        }

        .health-bar-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            height: 25px;
            overflow: hidden;
            position: relative;
        }

        .health-bar {
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }

        #player1Health {
            background: linear-gradient(90deg, #56ab2f 0%, #a8e063 100%);
        }

        #player2Health {
            background: linear-gradient(90deg, #eb3349 0%, #f45c43 100%);
        }

        canvas {
            display: block;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 50%, #90EE90 100%);
            border-bottom: 5px solid #8B4513;
        }

        .controls {
            background: #f8f9fa;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .player-controls {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .player-controls h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .control-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .control-item:last-child {
            border-bottom: none;
        }

        .key {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
            min-width: 60px;
            text-align: center;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px 60px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .game-over h2 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
        }

        .game-over button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .game-over button:hover {
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            canvas {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>‚öîÔ∏è STICKMAN FIGHTER ‚öîÔ∏è</h1>
            <div class="health-bars">
                <div class="player-health">
                    <div class="player-name">üîµ Ng∆∞·ªùi Ch∆°i 1</div>
                    <div class="health-bar-container">
                        <div class="health-bar" id="player1Health" style="width: 100%;">100%</div>
                    </div>
                </div>
                <div class="player-health">
                    <div class="player-name">üî¥ Ng∆∞·ªùi Ch∆°i 2</div>
                    <div class="health-bar-container">
                        <div class="health-bar" id="player2Health" style="width: 100%;">100%</div>
                    </div>
                </div>
            </div>
        </div>

        <canvas id="gameCanvas" width="900" height="500"></canvas>

        <div class="controls">
            <div class="player-controls">
                <h3>üîµ Ng∆∞·ªùi Ch∆°i 1</h3>
                <div class="control-item">
                    <span>Di chuy·ªÉn:</span>
                    <div>
                        <span class="key">A</span>
                        <span class="key">D</span>
                    </div>
                </div>
                <div class="control-item">
                    <span>Nh·∫£y:</span>
                    <span class="key">W</span>
                </div>
                <div class="control-item">
                    <span>ƒê·∫•m:</span>
                    <span class="key">F</span>
                </div>
                <div class="control-item">
                    <span>ƒê√°:</span>
                    <span class="key">G</span>
                </div>
            </div>

            <div class="player-controls">
                <h3>üî¥ Ng∆∞·ªùi Ch∆°i 2</h3>
                <div class="control-item">
                    <span>Di chuy·ªÉn:</span>
                    <div>
                        <span class="key">‚Üê</span>
                        <span class="key">‚Üí</span>
                    </div>
                </div>
                <div class="control-item">
                    <span>Nh·∫£y:</span>
                    <span class="key">‚Üë</span>
                </div>
                <div class="control-item">
                    <span>ƒê·∫•m:</span>
                    <span class="key">NUM 1</span>
                </div>
                <div class="control-item">
                    <span>ƒê√°:</span>
                    <span class="key">NUM 2</span>
                </div>
            </div>
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <h2 id="winnerText"></h2>
        <p style="font-size: 20px;">Ch√∫c m·ª´ng chi·∫øn th·∫Øng!</p>
        <button onclick="restartGame()">üîÑ Ch∆°i L·∫°i</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game state
        const gravity = 0.8;
        const groundLevel = canvas.height - 80;

        // Player class
        class Player {
            constructor(x, color, controls) {
                this.x = x;
                this.y = groundLevel;
                this.width = 20;
                this.height = 80;
                this.color = color;
                this.velocityX = 0;
                this.velocityY = 0;
                this.jumping = false;
                this.health = 100;
                this.controls = controls;
                this.attacking = false;
                this.attackCooldown = 0;
                this.facingRight = color === '#3498db' ? true : false;
                this.attackType = null;
            }

            draw() {
                ctx.save();
                
                // Body
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';

                // Head
                ctx.beginPath();
                ctx.arc(this.x, this.y - this.height + 15, 12, 0, Math.PI * 2);
                ctx.stroke();

                // Body line
                ctx.beginPath();
                ctx.moveTo(this.x, this.y - this.height + 27);
                ctx.lineTo(this.x, this.y - 30);
                ctx.stroke();

                // Arms
                const armY = this.y - 50;
                if (this.attacking && this.attackType === 'punch') {
                    // Punching animation
                    const armExtend = this.facingRight ? 25 : -25;
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x + armExtend, armY);
                    ctx.stroke();
                    
                    // Other arm
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x + (this.facingRight ? -10 : 10), armY - 5);
                    ctx.stroke();
                } else if (this.attacking && this.attackType === 'kick') {
                    // Normal arms during kick
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x - 15, armY + 10);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x + 15, armY + 10);
                    ctx.stroke();
                } else {
                    // Normal arms
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x - 15, armY + 15);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(this.x, armY);
                    ctx.lineTo(this.x + 15, armY + 15);
                    ctx.stroke();
                }

                // Legs
                const legY = this.y - 30;
                if (this.attacking && this.attackType === 'kick') {
                    // Kicking animation
                    const legExtend = this.facingRight ? 30 : -30;
                    ctx.beginPath();
                    ctx.moveTo(this.x, legY);
                    ctx.lineTo(this.x + legExtend, legY + 10);
                    ctx.stroke();
                    
                    // Standing leg
                    ctx.beginPath();
                    ctx.moveTo(this.x, legY);
                    ctx.lineTo(this.x, this.y);
                    ctx.stroke();
                } else {
                    // Normal legs
                    ctx.beginPath();
                    ctx.moveTo(this.x, legY);
                    ctx.lineTo(this.x - 10, this.y);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(this.x, legY);
                    ctx.lineTo(this.x + 10, this.y);
                    ctx.stroke();
                }

                ctx.restore();
            }

            update() {
                // Apply gravity
                if (this.y < groundLevel) {
                    this.velocityY += gravity;
                } else {
                    this.y = groundLevel;
                    this.velocityY = 0;
                    this.jumping = false;
                }

                // Update position
                this.y += this.velocityY;
                this.x += this.velocityX;

                // Boundaries
                if (this.x < 50) this.x = 50;
                if (this.x > canvas.width - 50) this.x = canvas.width - 50;

                // Attack cooldown
                if (this.attackCooldown > 0) {
                    this.attackCooldown--;
                    if (this.attackCooldown === 0) {
                        this.attacking = false;
                        this.attackType = null;
                    }
                }

                this.draw();
            }

            jump() {
                if (!this.jumping && this.y >= groundLevel) {
                    this.velocityY = -15;
                    this.jumping = true;
                }
            }

            attack(type) {
                if (this.attackCooldown === 0) {
                    this.attacking = true;
                    this.attackType = type;
                    this.attackCooldown = 20;
                    return true;
                }
                return false;
            }

            getAttackHitbox() {
                if (!this.attacking) return null;
                
                const range = this.attackType === 'kick' ? 40 : 30;
                return {
                    x: this.facingRight ? this.x : this.x - range,
                    y: this.attackType === 'kick' ? this.y - 40 : this.y - 50,
                    width: range,
                    height: 30
                };
            }
        }

        // Create players
        const player1 = new Player(150, '#3498db', {
            left: 'a',
            right: 'd',
            jump: 'w',
            punch: 'f',
            kick: 'g'
        });

        const player2 = new Player(canvas.width - 150, '#e74c3c', {
            left: 'ArrowLeft',
            right: 'ArrowRight',
            jump: 'ArrowUp',
            punch: '1',
            kick: '2'
        });

        // Keyboard state
        const keys = {};

        document.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
            
            // Player 1 controls
            if (e.key.toLowerCase() === player1.controls.jump) player1.jump();
            if (e.key.toLowerCase() === player1.controls.punch) {
                if (player1.attack('punch')) checkHit(player1, player2);
            }
            if (e.key.toLowerCase() === player1.controls.kick) {
                if (player1.attack('kick')) checkHit(player1, player2);
            }

            // Player 2 controls
            if (e.key === player2.controls.jump) player2.jump();
            if (e.key === player2.controls.punch || e.key === 'End') {
                if (player2.attack('punch')) checkHit(player2, player1);
            }
            if (e.key === player2.controls.kick || e.key === 'ArrowDown') {
                if (player2.attack('kick')) checkHit(player2, player1);
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });

        function checkHit(attacker, defender) {
            setTimeout(() => {
                const hitbox = attacker.getAttackHitbox();
                if (!hitbox) return;

                const hit = (
                    defender.x < hitbox.x + hitbox.width &&
                    defender.x + defender.width > hitbox.x &&
                    defender.y - defender.height < hitbox.y + hitbox.height &&
                    defender.y > hitbox.y
                );

                if (hit) {
                    const damage = attacker.attackType === 'kick' ? 12 : 8;
                    defender.health = Math.max(0, defender.health - damage);
                    updateHealthBars();
                    
                    // Knockback
                    const knockbackDirection = attacker.facingRight ? 1 : -1;
                    defender.x += knockbackDirection * 15;
                    defender.velocityY = -5;
                    
                    if (defender.health <= 0) {
                        endGame(attacker === player1 ? 1 : 2);
                    }
                }
            }, 5);
        }

        function updateHealthBars() {
            document.getElementById('player1Health').style.width = player1.health + '%';
            document.getElementById('player1Health').textContent = Math.round(player1.health) + '%';
            
            document.getElementById('player2Health').style.width = player2.health + '%';
            document.getElementById('player2Health').textContent = Math.round(player2.health) + '%';
        }

        function endGame(winner) {
            const gameOverDiv = document.getElementById('gameOver');
            const winnerText = document.getElementById('winnerText');
            winnerText.textContent = winner === 1 ? 'üîµ Ng∆∞·ªùi Ch∆°i 1 Th·∫Øng!' : 'üî¥ Ng∆∞·ªùi Ch∆°i 2 Th·∫Øng!';
            gameOverDiv.style.display = 'block';
        }

        function restartGame() {
            player1.health = 100;
            player2.health = 100;
            player1.x = 150;
            player2.x = canvas.width - 150;
            player1.y = groundLevel;
            player2.y = groundLevel;
            player1.velocityX = 0;
            player1.velocityY = 0;
            player2.velocityX = 0;
            player2.velocityY = 0;
            updateHealthBars();
            document.getElementById('gameOver').style.display = 'none';
        }

        // Game loop
        function gameLoop() {
            // Clear canvas
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw ground gradient
            const gradient = ctx.createLinearGradient(0, canvas.height - 100, 0, canvas.height);
            gradient.addColorStop(0, '#90EE90');
            gradient.addColorStop(1, '#228B22');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, canvas.height - 80, canvas.width, 80);

            // Handle player 1 movement
            player1.velocityX = 0;
            if (keys[player1.controls.left]) {
                player1.velocityX = -5;
                player1.facingRight = false;
            }
            if (keys[player1.controls.right]) {
                player1.velocityX = 5;
                player1.facingRight = true;
            }

            // Handle player 2 movement
            player2.velocityX = 0;
            if (keys[player2.controls.left.toLowerCase()]) {
                player2.velocityX = -5;
                player2.facingRight = false;
            }
            if (keys[player2.controls.right.toLowerCase()]) {
                player2.velocityX = 5;
                player2.facingRight = true;
            }

            // Update players
            player1.update();
            player2.update();

            requestAnimationFrame(gameLoop);
        }

        // Start game
        gameLoop();
    </script>
</body>
</html>